{"version":3,"file":"../../js/llms-quiz.min.js","sources":["llms-quiz.js"],"sourcesContent":[";/* global LLMS, $ */\n/* jshint strict: true */\n\n/**\n * Front End Quiz Class.\n *\n * @type {Object}\n *\n * @since 1.0.0\n * @version 7.8.0\n */( function( $ ) {\n\n\tvar quiz = {\n\n\t\t/**\n\t\t * Selector of all the available button elements\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\t$buttons: null,\n\n\t\t/**\n\t\t * Main Question Container Element.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\t$container: null,\n\n\t\t/**\n\t\t * Main Quiz container UI element.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\t$ui: null,\n\n\t\t/**\n\t\t * Attempt key for the current quiz.\n\t\t *\n\t\t * @type {[type]}\n\t\t */\n\t\tattempt_key: null,\n\n\t\t/**\n\t\t * Question ID of the current question.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\t\tcurrent_question: 0,\n\n\t\t/**\n\t\t * Total number of questions in the current quiz.\n\t\t *\n\t\t * @type {Number}\n\t\t */\n\t\ttotal_questions: 0,\n\n\t\t/**\n\t\t * Object of quiz question HTML.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tquestions: {},\n\n\t\t/**\n\t\t * Validator functions for question type.\n\t\t * Third party custom question types can register validators for use when answering questions.\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tvalidators: {},\n\n\t\t/**\n\t\t * Records current status of a quiz session.\n\t\t * If a user attempts to navigate away from a quiz\n\t\t * while taking the quiz they'll be warned that their progress\n\t\t * will not be saved if this status is not null.\n\t\t *\n\t\t * @type {Bool}\n\t\t */\n\t\tstatus: null,\n\n\t\t/**\n\t\t * Records if the quiz can be resumed.\n\t\t */\n\t\tresumable: null,\n\n\t\t/**\n\t\t * Flag if the user is exiting the quiz.\n\t\t */\n\t\texiting_quiz: false,\n\n\t\t/**\n\t\t * Bind DOM events.\n\t\t *\n\t\t * @since 1.0.0\n\t\t * @since 3.16.6 Unknown.\n\t\t * @since 7.8.0 Add quiz resume and hide leave warning if quiz is resumable.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tbind: function() {\n\n\t\t\tvar self = this;\n\n\t\t\t// Start quiz.\n\t\t\t$( '#llms_start_quiz' ).on( 'click', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.start_quiz();\n\t\t\t} );\n\n\t\t\t// Resume quiz.\n\t\t\t$( '#llms_resume_quiz' ).on( 'click', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.resume_quiz();\n\t\t\t} );\n\n\t\t\t// Draw quiz grade circular chart.\n\t\t\t$( '.llms-donut' ).each( function() {\n\t\t\t\tLLMS.Donut( $( this ) );\n\t\t\t} );\n\n\t\t\t// Redirect to attempt on attempt selection change.\n\t\t\t$( '#llms-quiz-attempt-select' ).on( 'change', function() {\n\t\t\t\tvar val = $( this ).val();\n\t\t\t\tif ( val ) {\n\t\t\t\t\twindow.location.href = val;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Warn when quiz is running and user tries to leave the page when quiz is not resumable.\n\t\t\t$( window ).on( 'beforeunload', function() {\n\t\t\t\tif ( self.status && ! self.exiting_quiz ) {\n\t\t\t\t\treturn LLMS.l10n.translate( 'Are you sure you wish to quit this quiz attempt?' );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t} );\n\n\t\t\t// Complete the quiz attempt when user leaves if the quiz is running.\n\t\t\t$( window ).on( 'unload', function() {\n\t\t\t\tif ( self.status && ! self.resumable ) {\n\t\t\t\t\tself.complete_quiz();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( document ).on( 'llms-post-append-question', self.post_append_question );\n\n\t\t\t// Register validators.\n\t\t\tthis.register_validator( 'content', this.validate );\n\t\t\tthis.register_validator( 'choice', this.validate_choice );\n\t\t\tthis.register_validator( 'picture_choice', this.validate_choice );\n\t\t\tthis.register_validator( 'true_false', this.validate_choice );\n\n\t\t},\n\n\t\t/**\n\t\t * Add an error message to the UI\n\t\t *\n\t\t * @param    string   msg  error message string\n\t\t * @return   void\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tadd_error: function( msg ) {\n\n\t\t\tvar self = this;\n\n\t\t\tself.$container.find( '#llms-quiz-error-container' ).remove();\n\t\t\tself.$container.append( '<div id=\"llms-quiz-error-container\" role=\"alert\" aria-atomic=\"true\"></div>' );\n\t\t\tconst $error_container = self.$container.find( '#llms-quiz-error-container' );\n\n\t\t\tvar $err = $( '<p class=\"llms-error\">' + msg + '<a href=\"#\"><i class=\"fa fa-times-circle\" aria-hidden=\"true\"></i></a></p>' );\n\t\t\t$err.on( 'click', 'a', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$err.fadeOut( '200' );\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$err.remove();\n\t\t\t\t}, 210 );\n\t\t\t} );\n\t\t\t$error_container.append( $err );\n\n\t\t},\n\n\t\tsave_question: function( options ) {\n\t\t\tvar self      = this,\n\t\t\t\t$question = this.$container.find( '.llms-question-wrapper' ),\n\t\t\t\ttype      = $question.attr( 'data-type' ),\n\t\t\t\tvalid;\n\n\t\t\tif ( ! this.validators[ type ] ) {\n\t\t\t\tconsole.log( 'No validator registered for question type ' + type );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvalid = this.validators[ type ]( $question );\n\n\t\t\tvar requestData = {\n\t\t\t\taction: 'quiz_answer_question',\n\t\t\t\tanswer: valid.answer,\n\t\t\t\tattempt_key: self.attempt_key,\n\t\t\t\tquestion_id: $question.attr( 'data-id' ),\n\t\t\t\tquestion_type: $question.attr( 'data-type' ),\n\t\t\t};\n\n\t\t\tif ( options && options.exit_quiz ) {\n\t\t\t\trequestData.via_exit_quiz = true;\n\t\t\t}\n\n\t\t\tif ( options && options.previous_question ) {\n\t\t\t\trequestData.via_previous_question = true;\n\t\t\t}\n\n\t\t\tLLMS.Ajax.call( {\n\t\t\t\tdata: requestData,\n\t\t\t\tsuccess: function( r ) {\n\t\t\t\t\tif (options && typeof options.callback === 'function') {\n\t\t\t\t\t\toptions.callback();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Answer a Question\n\t\t *\n\t\t * @param    obj   $btn   jQuery object for the \"Next Lesson\" button\n\t\t * @return   void\n\t\t * @since    1.0.0\n\t\t * @version  3.16.6\n\t\t */\n\t\tanswer_question: function( $btn ) {\n\n\t\t\tvar self      = this,\n\t\t\t\t$question = this.$container.find( '.llms-question-wrapper' ),\n\t\t\t\ttype      = $question.attr( 'data-type' ),\n\t\t\t\tvalid;\n\n\t\t\tif ( ! this.validators[ type ] ) {\n\n\t\t\t\tconsole.log( 'No validator registered for question type ' + type );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvalid = this.validators[ type ]( $question );\n\t\t\tif ( ! valid || true !== valid.valid || ! valid.answer ) {\n\t\t\t\treturn self.add_error( valid.valid );\n\t\t\t}\n\n\t\t\tLLMS.Ajax.call( {\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'quiz_answer_question',\n\t\t\t\t\tanswer: valid.answer,\n\t\t\t\t\tattempt_key: self.attempt_key,\n\t\t\t\t\tquestion_id: $question.attr( 'data-id' ),\n\t\t\t\t\tquestion_type: $question.attr( 'data-type' ),\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\n\t\t\t\t\tvar msg = $btn.hasClass( 'llms-button-quiz-complete' ) ? LLMS.l10n.translate( 'Grading Quiz...' ) : LLMS.l10n.translate( 'Loading Question...' );\n\t\t\t\t\tself.toggle_loader( 'show', msg );\n\n\t\t\t\t\tself.update_progress_bar( 'increment' );\n\n\t\t\t\t},\n\t\t\t\tsuccess: function( r ) {\n\n\t\t\t\t\tself.toggle_loader( 'hide' );\n\n\t\t\t\t\tif ( r.data && r.data.html ) {\n\n\t\t\t\t\t\t// load html from the cached questions if it exists already\n\t\t\t\t\t\tif ( r.data.question_id && self.questions[ 'q-' + r.data.question_id ] ) {\n\n\t\t\t\t\t\t\tself.load_question( self.questions[ 'q-' + r.data.question_id ] );\n\n\t\t\t\t\t\t\t// load html from server if the question's never been seen before\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.load_question( r.data.html );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( r.data && r.data.redirect ) {\n\n\t\t\t\t\t\tself.redirect( r.data.redirect );\n\n\t\t\t\t\t} else if ( r.message ) {\n\n\t\t\t\t\t\tself.$container.append( '<p>' + r.message + '</p>' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar msg = LLMS.l10n.translate( 'An unknown error occurred. Please try again.' );\n\t\t\t\t\t\tself.$container.append( '<p>' + msg + '</p>' );\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\terror: function ( jqXHR, status, error ) {\n\t\t\t\t\tself.reload_question();\n\t\t\t\t\tself.add_error( LLMS.l10n.translate( 'An unknown error occurred. Please try again.' ) );\n\t\t\t\t\tconsole.log( error );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Complete the quiz\n\t\t * Called when timed quizzes reach time limit\n\t\t * & during unload events to record the attempt as abandoned\n\t\t *\n\t\t * @return   void\n\t\t * @since    1.0.0\n\t\t * @version  3.9.0\n\t\t */\n\t\tcomplete_quiz: function() {\n\n\t\t\tvar self = this;\n\n\t\t\tLLMS.Ajax.call( {\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'quiz_end',\n\t\t\t\t\tattempt_key: self.attempt_key,\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\n\t\t\t\t\tself.toggle_loader( 'show', 'Grading Quiz...' );\n\n\t\t\t\t},\n\t\t\t\tsuccess: function( r ) {\n\n\t\t\t\t\tself.toggle_loader( 'hide' );\n\n\t\t\t\t\tif ( r.data && r.data.redirect ) {\n\n\t\t\t\t\t\tself.redirect( r.data.redirect );\n\n\t\t\t\t\t} else if ( r.message ) {\n\n\t\t\t\t\t\tself.$container.append( '<p>' + r.message + '</p>' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar msg = LLMS.l10n.translate( 'An unknown error occurred. Please try again.' );\n\t\t\t\t\t\tself.$container.append( '<p>' + msg + '</p>' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the index of a question by question id\n\t\t *\n\t\t * @param    int   qid  WP Post ID of the question\n\t\t * @return   int\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tget_question_index: function( qid ) {\n\n\t\t\treturn Object.keys( this.questions ).indexOf( 'q-' + qid );\n\n\t\t},\n\n\t\t/**\n\t\t * Redirect on quiz completion / timeout\n\t\t *\n\t\t * @param    string   url  redirect url\n\t\t * @return   void\n\t\t * @since    3.9.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tredirect: function( url ) {\n\n\t\t\tthis.toggle_loader( 'show', 'Grading Quiz...' );\n\t\t\tthis.status          = null;\n\t\t\twindow.location.href = url;\n\n\t\t},\n\n\t\treload_question: function() {\n\t\t\tvar self = this;\n\n\t\t\tself.toggle_loader( 'show', LLMS.l10n.translate( 'Loading Question...' ) );\n\t\t\tself.update_progress_bar( 'reload' );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tself.toggle_loader( 'hide' );\n\t\t\t\tself.load_question( self.questions[ 'q-' + self.current_question ] );\n\t\t\t}, 100 );\n\n\t\t},\n\n\t\t/**\n\t\t * Return to the previous question.\n\t\t *\n\t\t * @since 1.0.0\n\t\t * @since 3.16.6 Unknown.\n\t\t * @since 7.8.0 Retrieve question HTML from the server when not cached.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tprevious_question: function() {\n\n\t\t\tvar self = this;\n\n\t\t\tthis.save_question( {\n\t\t\t\tprevious_question: true,\n\t\t\t\tcallback: function() {\n\n\t\t\t\t\tself.toggle_loader( 'show', LLMS.l10n.translate( 'Loading Question...' ) );\n\t\t\t\t\tself.update_progress_bar( 'decrement' );\n\n\t\t\t\t\tvar ids     = Object.keys( self.questions ),\n\t\t\t\t\t\tcurr    = ids.indexOf( 'q-' + self.current_question ),\n\t\t\t\t\t\tprev_id = ids[0];\n\n\t\t\t\t\tif ( curr >= 1 ) {\n\t\t\t\t\t\tprev_id = ids[ curr - 1 ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retrieve previous question HTML from the server.\n\t\t\t\t\tif ( ! self.questions[ prev_id ] ) {\n\t\t\t\t\t\tLLMS.Ajax.call( {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\taction     : 'quiz_get_question',\n\t\t\t\t\t\t\t\tattempt_key: self.attempt_key,\n\t\t\t\t\t\t\t\tquestion_id: prev_id.substring(2), // Remove 'q-'.\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: function( r ) {\n\n\t\t\t\t\t\t\t\tself.toggle_loader( 'hide' );\n\t\t\t\t\t\t\t\tif ( r.data && r.data.html ) {\n\n\t\t\t\t\t\t\t\t\tself.load_question( r.data.html );\n\n\t\t\t\t\t\t\t\t} else if ( r.data && r.data.redirect ) {\n\n\t\t\t\t\t\t\t\t\tself.redirect( r.data.redirect );\n\n\t\t\t\t\t\t\t\t} else if ( r.message ) {\n\n\t\t\t\t\t\t\t\t\tself.$container.append( '<p>' + r.message + '</p>' );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tvar msg = LLMS.l10n.translate( 'An unknown error occurred. Please try again.' );\n\t\t\t\t\t\t\t\t\tself.$container.append( '<p>' + msg + '</p>' );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\tself.toggle_loader( 'hide' );\n\t\t\t\t\t\t\tself.load_question( self.questions[ prev_id ] );\n\t\t\t\t\t\t}, 100 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register question type validator functions\n\t\t *\n\t\t * @param    string     type  question type id\n\t\t * @param    function   func  callback function to validate the question with\n\t\t * @return   void\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tregister_validator: function( type, func ) {\n\n\t\t\tthis.validators[ type ] = func;\n\n\t\t},\n\n\t\t/**\n\t\t * Start a Quiz.\n\t\t *\n         * @since 1.0.0\n         * @since 3.24.3 Unknown.\n\t\t * @since 7.8.0 Abstracted the function in `init_quiz`.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tstart_quiz: function () {\n\n\t\t\tthis.init_quiz( 'quiz_start' );\n\t\t},\n\n\t\t/**\n\t\t * Resume a Quiz.\n\t\t *\n\t\t * @since 7.8.0\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tresume_quiz: function () {\n\n\t\t\tthis.init_quiz( 'quiz_resume' );\n\t\t},\n\n\t\t/**\n\t\t * Initiate 'Start' or 'Resume' action on a Quiz via AJAX call.\n\t\t *\n\t\t * @since 7.8.0\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tinit_quiz: function ( action ) {\n\n\t\t\tvar self = this;\n\n\t\t\tif( 'quiz_resume' === action ) {\n\t\t\t\t// Disable resume button.\n\t\t\t\t$( '#llms_resume_quiz' ).attr( 'disabled', 'disabled' );\n\t\t\t}\n\n\t\t\tthis.load_ui_elements();\n\t\t\tthis.$ui        = $( '#llms-quiz-ui' );\n\t\t\tthis.$buttons   = $( '#llms-quiz-nav button' );\n\t\t\tthis.$container = $( '#llms-quiz-question-wrapper' );\n\n\t\t\t// Bind submission event for answering questions.\n\t\t\t$( '#llms-next-question, #llms-complete-quiz' ).on( 'click', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.answer_question( $( this ) );\n\t\t\t} );\n\n\t\t\t// Bind submission event for navigating backwards.\n\t\t\t$( '#llms-prev-question' ).on( 'click', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.previous_question();\n\t\t\t} );\n\n\t\t\t// Bind exit event for quiz.\n\t\t\t$( '#llms-quiz-nav' ).on( 'click', '#llms-exit-quiz', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.save_question( {\n\t\t\t\t\texit_quiz: true,\n\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\tself.exiting_quiz = true;\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} );\n\n\t\t\tif ( 'quiz_resume' === action ) {\n\t\t\t\tdata = {\n\t\t\t\t\taction: 'quiz_resume',\n\t\t\t\t\tattempt_key: $( '#llms-attempt-key' ).val(),\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tdata = {\n\t\t\t\t\taction: 'quiz_start',\n\t\t\t\t\tattempt_key: $( '#llms-attempt-key' ).val(),\n\t\t\t\t\tlesson_id : $( '#llms-lesson-id' ).val(),\n\t\t\t\t\tquiz_id : $( '#llms-quiz-id' ).val(),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tLLMS.Ajax.call( {\n\t\t\t\tdata: data,\n\t\t\t\tbeforeSend: function() {\n\n\t\t\t\t\tself.status = true;\n\t\t\t\t\t$( '#llms-quiz-wrapper, #quiz-start-button, #quiz-resume-button' ).remove();\n\t\t\t\t\t$( 'html, body' ).stop().animate( {scrollTop: 0 }, 500 );\n\t\t\t\t\tself.toggle_loader( 'show', LLMS.l10n.translate( 'Loading Quiz...' ) );\n\n\t\t\t\t},\n\t\t\t\terror: function( r, s, t ) {\n\t\t\t\t\tconsole.log( r, s, t );\n\t\t\t\t},\n\t\t\t\tsuccess: function( r ) {\n\n\t\t\t\t\tself.toggle_loader( 'hide' );\n\n\t\t\t\t\tif ( r.data && r.data.html ) {\n\n\t\t\t\t\t\tself.attempt_key     = r.data.attempt_key;\n\t\t\t\t\t\tself.total_questions = r.data.total;\n\t\t\t\t\t\tself.resumable       = r.data.can_be_resumed;\n\n\t\t\t\t\t\tif( 'quiz_resume' === action ) {\n\t\t\t\t\t\t\tr.data.question_ids.forEach( id => self.questions[`q-${id}`] = '' );\n\t\t\t\t\t\t} else if ( r.data.time_limit ) {\n\t\t\t\t\t\t\tself.start_quiz_timer( r.data.time_limit );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adding Exit Button in Layout if quiz is resumable.\n\t\t\t\t\t\tif ( self.resumable ) {\n\t\t\t\t\t\t\t$( '#llms-quiz-nav' ).append( '<button class=\"button llms-button-secondary\" id=\"llms-exit-quiz\" name=\"llms_exit_quiz\">' + LLMS.l10n.translate( 'Save & Exit Quiz' ) + '</button>' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.load_question( r.data.html );\n\n\t\t\t\t\t\tif ( 'quiz_resume' === action ) {\n\t\t\t\t\t\t\tself.update_progress_bar( 'reload' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( r.message ) {\n\n\t\t\t\t\t\tself.$container.append( '<p>' + r.message + '</p>' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar msg = LLMS.l10n.translate( 'An unknown error occurred. Please try again.' );\n\t\t\t\t\t\tself.$container.append( '<p>' + msg + '</p>' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t/**\n\t\t\t * Use JS mouse events instead of CSS :hover because iOS is really smart\n\t\t\t *\n\t\t\t * @see: https://css-tricks.com/annoying-mobile-double-tap-link-issue/\n\t\t\t */\n\t\t\tif ( ! LLMS.is_touch_device() ) {\n\n\t\t\t\tthis.$ui.on( 'mouseenter', 'li.llms-choice label', function() {\n\t\t\t\t\t$( this ).addClass( 'hovered' );\n\t\t\t\t} );\n\t\t\t\tthis.$ui.on( 'mouseleave', 'li.llms-choice label', function() {\n\t\t\t\t\t$( this ).removeClass( 'hovered' );\n\t\t\t\t} );\n\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Start Quiz Timer\n\t\t * Gets minutes from hidden field\n\t\t * Not used as actual quiz timer. Quiz is timed on the server from the quiz class\n\t\t * Calculates minutes to milliseconds and then converts to hours / minutes\n\t\t * When time limit reaches 0 calls complete_quiz() to complete quiz.\n\t\t *\n\t\t * @return Calls get_count_down at a set interval of 1 second\n\t\t * @since    1.0.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tstart_quiz_timer: function( total_minutes ) {\n\n\t\t\t// create and append the UI for the countdown clock\n\t\t\tvar $el = $( '<div class=\"llms-quiz-timer\" id=\"llms-quiz-timer\" />' ),\n\t\t\t\tmsg = LLMS.l10n.translate( 'Time Remaining' );\n\n\t\t\t$el.append( '<i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i><span class=\"screen-reader-text\">' + msg + '</span>' );\n\t\t\tconst quiz_header = $( '#llms-quiz-header' );\n\t\t\t$el.append( '<time aria-describedby=\"llms-timer-hint\" id=\"llms-quiz-time-remaining\" class=\"llms-tiles\" datetime=\"\"></time>' );\n\n\t\t\tquiz_header.append( $el );\n\t\t\tquiz_header.append( '<div id=\"llms-timer-live\" class=\"sr-only\" aria-live=\"polite\" aria-atomic=\"true\"></div>' );\n\t\t\tquiz_header.append( '<p id=\"llms-timer-hint\" class=\"sr-only\">Announcements every minute; every 10 seconds in the last minute.</p>' );\n\n\t\t\t// start the timer\n\t\t\tvar self        = this,\n\t\t\t\ttarget_date = new Date().getTime() + ( ( total_minutes * 60 ) * 1000 ), // set the countdown date\n\t\t\t\ttime_limit  = ( ( total_minutes * 60 ) * 1000 ),\n\t\t\t\tcountdown   = document.getElementById( 'llms-quiz-time-remaining' ), // get tag element\n\t\t\t\tdays, hours, minutes, seconds; // variables for time units\n\n\t\t\t// set actual timer\n\t\t\tsetTimeout( function() {\n\t\t\t\tself.complete_quiz();\n\t\t\t}, time_limit + 1000 );\n\n\t\t\tthis.getCountdown(\n\t\t\t\ttotal_minutes,\n\t\t\t\ttarget_date,\n\t\t\t\ttime_limit,\n\t\t\t\tdays,\n\t\t\t\thours,\n\t\t\t\tminutes,\n\t\t\t\tseconds,\n\t\t\t\tcountdown\n\t\t\t);\n\n\t\t\t// call get_count_down every 1 second\n\t\t\tsetInterval( function () {\n\t\t\t\tself.getCountdown(\n\t\t\t\t\ttotal_minutes,\n\t\t\t\t\ttarget_date,\n\t\t\t\t\ttime_limit,\n\t\t\t\t\tdays,\n\t\t\t\t\thours,\n\t\t\t\t\tminutes,\n\t\t\t\t\tseconds,\n\t\t\t\t\tcountdown\n\t\t\t\t);\n\t\t\t}, 1000 );\n\t\t},\n\n\t\t/**\n\t\t * Trigger events\n\t\t *\n\t\t * @param    string   event  event to trigger\n\t\t * @return   void\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\ttrigger: function( event ) {\n\n\t\t\tvar self = this;\n\n\t\t\t// trigger question submission for the current question\n\t\t\tif ( 'answer_question' === event ) {\n\n\t\t\t\tif ( this.get_question_index( self.current_question ) === self.total_questions ) {\n\n\t\t\t\t\t$( '#llms-complete-quiz' ).trigger( 'click' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$( '#llms-next-question' ).trigger( 'click' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Load the HTML of a question into the DOM and the question cache\n\t\t *\n\t\t * @param    string   html  string of html\n\t\t * @return   void\n\t\t * @since    3.9.0\n\t\t * @version  3.16.6\n\t\t */\n\t\tload_question: function( html ) {\n\n\t\t\tvar $html = $( html ),\n\t\t\t\tqid   = $html.attr( 'data-id' );\n\n\t\t\t// cache the question HTML for faster rewinds\n\t\t\tif ( ! this.questions[ 'q-' + qid ] ) {\n\t\t\t\tthis.questions[ 'q-' + qid ] = $html;\n\t\t\t}\n\n\t\t\tthis.update_progress( qid );\n\n\t\t\tthis.current_question = qid;\n\n\t\t\t$( document ).trigger( 'llms-pre-append-question', $html );\n\n\t\t\tthis.$container.append( $html );\n\n\t\t\t$( document ).trigger( 'llms-post-append-question', $html );\n\n\t\t},\n\n\t\t/**\n\t\t * Constructs the quiz UI & adds the elements into the DOM\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.16.0\n\t\t * @version  3.16.9\n\t\t */\n\t\tload_ui_elements: function() {\n\n\t\t\t// Removing the quiz UI elements if they already exist.\n\t\t\tif ( $( '#llms-quiz-ui').length > 0 ) {\n\t\t\t\t$( '#llms-quiz-ui' ).remove();\n\t\t\t}\n\n\t\t\tvar $html   = $( '<div class=\"llms-quiz-ui\" id=\"llms-quiz-ui\" />' ),\n\t\t\t\t$header = $( '<header class=\"llms-quiz-header\" id=\"llms-quiz-header\" />' )\n\t\t\t\t$footer = $( '<footer class=\"llms-quiz-nav\" id=\"llms-quiz-nav\" />' );\n\n\t\t\t$footer.append( '<button class=\"button large llms-button-action\" id=\"llms-next-question\" name=\"llms_next_question\" type=\"submit\">' + LLMS.l10n.translate( 'Next Question' ) + '</button>' );\n\t\t\t$footer.append( '<button class=\"button large llms-button-action llms-button-quiz-complete\" id=\"llms-complete-quiz\" name=\"llms_complete_quiz\" type=\"submit\" style=\"display:none;\">' + LLMS.l10n.translate( 'Complete Quiz' ) + '</button>' );\n\t\t\t$footer.append( '<button class=\"button llms-button-secondary\" id=\"llms-prev-question\" name=\"llms_prev_question\" type=\"submit\" style=\"display:none;\">' + LLMS.l10n.translate( 'Previous Question' ) + '</button>' );\n\n\t\t\t$header.append( '<div class=\"llms-progress\"><div class=\"progress-bar-complete\"></div></div>' );\n\t\t\t$footer.append( '<div class=\"llms-quiz-counter\" id=\"llms-quiz-counter\"><span class=\"llms-current\"></span><span class=\"llms-sep\">/</span><span class=\"llms-total\"></span></div>' )\n\n\t\t\t$html.append( $header )\n\t\t\t\t .append( '<div class=\"llms-quiz-question-wrapper\" id=\"llms-quiz-question-wrapper\" />' )\n\t\t\t\t .append( $footer );\n\n\t\t\t$( '#llms-quiz-wrapper' ).after( $html );\n\n\t\t},\n\n\t\t/**\n\t\t * Perform actions on question HTML after it's been appended to the DOM\n\t\t *\n\t\t * @param    obj      event  js event object\n\t\t * @param    obj      html   js HTML object\n\t\t * @return   void\n\t\t * @since    3.16.6\n\t\t * @version  3.16.6\n\t\t */\n\t\tpost_append_question: function( event, html ) {\n\n\t\t\tvar $html = $( html );\n\n\t\t\tif ( $html.find( 'audio' ).length ) {\n\t\t\t\twp.mediaelement.initialize();\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Show or hide the \"loading\" spinner with an option message\n\t\t *\n\t\t * @param    string   display  show|hide\n\t\t * @param    string   msg      text to display when showing\n\t\t * @return   void\n\t\t * @since    3.9.0\n\t\t * @version  3.16.6\n\t\t */\n\t\ttoggle_loader: function( display, msg ) {\n\n\t\t\tif ( 'show' === display ) {\n\n\t\t\t\tmsg = msg || LLMS.l10n.translate( 'Loading...' );\n\n\t\t\t\tthis.$buttons.attr( 'disabled', 'disabled' );\n\n\t\t\t\tthis.$container.empty();\n\t\t\t\tLLMS.Spinner.start( this.$container );\n\t\t\t\tthis.$container.append( '<div class=\"llms-quiz-loading\">' + LLMS.l10n.translate( msg ) + '</div>' );\n\n\t\t\t} else {\n\n\t\t\t\tLLMS.Spinner.stop( this.$container );\n\t\t\t\tthis.$buttons.removeAttr( 'disabled' );\n\t\t\t\tthis.$container.find( '.llms-quiz-loading' ).remove();\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Update the progress bar and toggle button availability based on question the question being shown.\n\t\t *\n\t\t * @since 3.16.0\n\t\t * @since 7.8.0 Show counter and set the total as when needed.\n\t\t *\n\t\t * @param {Int} qid Question ID.\n\t\t * @return {Void}\n\t\t */\n\t\tupdate_progress: function( qid ) {\n\n\t\t\tvar index = this.get_question_index( qid );\n\n\t\t\tif ( -1 === index ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tindex++;\n\n\t\t\t$( '#llms-quiz-counter .llms-current' ).text( index );\n\t\t\tif ( index > 0 && ! $( '#llms-quiz-counter .llms-total' ).text() ) {\n\t\t\t\t$( '#llms-quiz-counter .llms-total' ).text( this.total_questions );\n\t\t\t\t$( '#llms-quiz-counter' ).show();\n\t\t\t}\n\n\t\t\t// Handle prev question.\n\t\t\tif ( index >= 2 ) {\n\t\t\t\t$( '#llms-prev-question' ).show();\n\t\t\t} else {\n\t\t\t\t$( '#llms-prev-question' ).hide();\n\t\t\t}\n\n\t\t\tif ( index === this.total_questions ) {\n\t\t\t\t$( '#llms-next-question' ).hide();\n\t\t\t\t$( '#llms-complete-quiz' ).show();\n\t\t\t} else {\n\t\t\t\t$( '#llms-next-question' ).show();\n\t\t\t\t$( '#llms-complete-quiz' ).hide();\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Increase progress bar ui element\n\t\t *\n\t\t * @param    string   dir  update direction [increment|decrement|reload]\n\t\t * @return   void\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tupdate_progress_bar: function( dir ) {\n\n\t\t\tvar index = this.get_question_index( this.current_question );\n\t\t\tswitch ( dir ) {\n\t\t\t\tcase 'increment':\n\t\t\t\t\tindex++;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'decrement':\n\t\t\t\t\tindex--;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'reload':\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tprogress = ( index / this.total_questions ) * 100;\n\t\t\tthis.$ui.find( '.progress-bar-complete' ).css( 'width', progress + '%' );\n\n\t\t},\n\n\t\t/**\n\t\t * Get Count Down\n\t\t * Called every second to update the on screen countdown timer\n\t\t * Changes color to yellow at 1/2 of total time\n\t\t * Changes color to red at 1/4 of total time\n\t\t *\n\t\t * @param  {[int]} minutes     [description]\n\t\t * @param  {[date]} target_date [description]\n\t\t * @param  {[int]} time_limit  [description]\n\t\t * @param  {[int]} days        [description]\n\t\t * @param  {[int]} hours       [description]\n\t\t * @param  {[int]} minutes     [description]\n\t\t * @param  {[int]} seconds     [description]\n\t\t * @param  {[int]} countdown   [description]\n\t\t * @return Displays updates hours, minutes on quiz timer\n\t\t * @since    1.0.0\n\t\t * @version  1.0.0\n\t\t */\n\t\tgetCountdown: function( total_minutes, target_date, time_limit, days, hours, minutes, seconds, countdown ){\n\n\t\t\t// find the amount of \"seconds\" between now and target\n\t\t\tvar current_date = new Date().getTime(),\n\t\t\t\tseconds_left = parseInt( ( target_date - current_date ) / 1000 );\n\n\t\t\tconst live = document.getElementById( 'llms-timer-live' );\n\n\t\t\tif ( seconds_left >= 0 ) {\n\n\t\t\t\tif ( ( seconds_left * 1000 ) < ( time_limit / 2 ) ) {\n\n\t\t\t\t\t$( '#llms-quiz-timer' ).addClass( 'color-half' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( seconds_left * 1000 ) < ( time_limit / 4 ) ) {\n\n\t\t\t\t\t$( '#llms-quiz-timer' ).removeClass( 'color-half' );\n\t\t\t\t\t$( '#llms-quiz-timer' ).addClass( 'color-empty' );\n\n\t\t\t\t}\n\n\t\t\t\tconst shouldAnnounce = (s) => {\n\t\t\t\t\tif ( s === parseInt( time_limit / 1000 ) ) return true;      // first render\n\t\t\t\t\tif ( s <= 10 ) return true;          // last 10 seconds: every second\n\t\t\t\t\tif ( s <= 60 ) return s % 10 === 0; // last minute: every 10s\n\t\t\t\t\treturn s % 60 === 0;               // otherwise: each minute mark\n\t\t\t\t};\n\n\t\t\t\tconst speak = ( hours, mins, secs ) => {\n\t\t\t\t\tif ( hours > 0 ) {\n\t\t\t\t\t\t// Translators: %1$s hours, %2$s minutes, and %3$s seconds remaining.\n\t\t\t\t\t\tlive.textContent = hours > 1 ? LLMS.l10n.replace( '%1$s hours, %2$s minutes remaining', {\n\t\t\t\t\t\t\t'%1$s': hours,\n\t\t\t\t\t\t\t'%2$s': mins,\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\t// Translators: 1 hour, %2$s minutes.\n\t\t\t\t\t\tLLMS.l10n.replace( '1 hour, %2$s minutes remaining', {\n\t\t\t\t\t\t\t'%2$s': mins,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else if ( mins > 0 && secs === 0 ) {\n\t\t\t\t\t\t// Translators: %1$s minutes remaining.\n\t\t\t\t\t\tlive.textContent = mins > 1 ? LLMS.l10n.replace( '%1$s minutes remaining', {\n\t\t\t\t\t\t\t'%1$s': mins,\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\t// Translators: 1 minute remaining.\n\t\t\t\t\t\tLLMS.l10n.replace( '%1$s minute remaining', {\n\t\t\t\t\t\t\tminutes: mins,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else if ( mins === 0 ) {\n\t\t\t\t\t\tlive.textContent = LLMS.l10n.replace( '%1$s seconds remaining', {\n\t\t\t\t\t\t\t'%1$s': secs,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tdays         = parseInt( seconds_left / 86400 );\n\t\t\t\tlet remainder = seconds_left % 86400;\n\t\t\t\thours        = parseInt( remainder / 3600 );\n\t\t\t\tremainder = seconds_left % 3600;\n\t\t\t\tminutes      = parseInt( remainder / 60 );\n\t\t\t\tseconds      = parseInt( remainder % 60 );\n\n\t\t\t\tcountdown.innerHTML = this.pad( hours ) + ':' + this.pad( minutes ) + ':' + this.pad( seconds );\n\n\t\t\t\t$( countdown ).attr( 'datetime', 'PT' + ( hours > 0 ? hours + 'H' : '' ) + ( minutes > 0 ? minutes + 'M' : '' ) + ( seconds > 0 ? seconds + 'S' : '' ) );\n\n\t\t\t\tif ( shouldAnnounce( seconds_left ) ) {\n\t\t\t\t\tspeak( hours, minutes, seconds );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Pad Number\n\t\t * pads number with 0 if single digit.\n\t\t *\n\t\t * @param  {[int]} n [number]\n\t\t * @return {[string]} [padded number]\n\t\t * @since    1.0.0\n\t\t * @version  1.0.0\n\t\t */\n\t\tpad: function(n) {\n\t\t\treturn (n < 10 ? '0' : '') + n;\n\t\t},\n\n\t\t/**\n\t\t * Basic validation method which performs no validation and returns a validation object\n\t\t * in the format required by the application\n\t\t *\n\t\t * @param    obj   $question  jQuery selector of the question\n\t\t * @return   obj\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tvalidate: function( $question ) {\n\t\t\treturn {\n\t\t\t\tanswer: [],\n\t\t\t\tvalid: true,\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Validates a choice question to ensure there's at least one checked input\n\t\t *\n\t\t * @param    obj   $question  jQuery selector of the question\n\t\t * @return   obj\n\t\t * @since    3.16.0\n\t\t * @version  3.16.0\n\t\t */\n\t\tvalidate_choice: function( $question ) {\n\n\t\t\tvar ret     = window.llms.quizzes.validate( $question ),\n\t\t\t\tchecked = $question.find( 'input:checked' );\n\n\t\t\tif ( ! checked.length ) {\n\t\t\t\tret.valid = LLMS.l10n.translate( 'You must select an answer to continue.' );\n\t\t\t} else {\n\t\t\t\tchecked.each( function() {\n\t\t\t\t\tret.answer.push( $( this ).val() );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn ret;\n\n\t\t},\n\n\t};\n\n\tquiz.bind();\n\n\twindow.llms         = window.llms || {};\n\twindow.llms.quizzes = quiz;\n\n} )( jQuery );\n"],"names":["$","quiz","$buttons","$container","$ui","attempt_key","current_question","total_questions","questions","validators","status","resumable","exiting_quiz","bind","self","this","on","e","preventDefault","start_quiz","resume_quiz","each","LLMS","Donut","val","window","location","href","l10n","translate","complete_quiz","document","post_append_question","register_validator","validate","validate_choice","add_error","msg","$error_container","find","remove","append","$err","fadeOut","setTimeout","save_question","options","$question","type","attr","requestData","action","answer","question_id","question_type","exit_quiz","via_exit_quiz","previous_question","via_previous_question","Ajax","call","data","success","r","callback","console","log","answer_question","$btn","valid","beforeSend","hasClass","toggle_loader","update_progress_bar","html","load_question","redirect","message","error","jqXHR","reload_question","get_question_index","qid","Object","keys","indexOf","url","ids","curr","prev_id","substring","func","init_quiz","load_ui_elements","reload","lesson_id","quiz_id","stop","animate","scrollTop","s","t","total","can_be_resumed","question_ids","forEach","id","time_limit","start_quiz_timer","is_touch_device","addClass","removeClass","total_minutes","$el","quiz_header","target_date","Date","getTime","countdown","getElementById","getCountdown","days","hours","minutes","seconds","setInterval","trigger","event","$html","update_progress","length","$header","$footer","after","wp","mediaelement","initialize","display","empty","Spinner","start","removeAttr","index","text","show","hide","dir","progress","css","current_date","seconds_left","parseInt","live","remainder","innerHTML","pad","mins","secs","textContent","replace","%1$s","%2$s","n","ret","llms","quizzes","checked","push","jQuery"],"mappings":"AAUG,CAAA,SAAYA,GAEd,IAAIC,EAAO,CAOVC,SAAU,KAOVC,WAAY,KAOZC,IAAK,KAOLC,YAAa,KAObC,iBAAkB,EAOlBC,gBAAiB,EAOjBC,UAAW,GAQXC,WAAY,GAUZC,OAAQ,KAKRC,UAAW,KAKXC,aAAc,CAAA,EAWdC,KAAM,WAEL,IAAIC,EAAOC,KAGXf,EAAG,kBAAmB,EAAEgB,GAAI,QAAS,SAAUC,GAC9CA,EAAEC,eAAe,EACjBJ,EAAKK,WAAW,CACjB,CAAE,EAGFnB,EAAG,mBAAoB,EAAEgB,GAAI,QAAS,SAAUC,GAC/CA,EAAEC,eAAe,EACjBJ,EAAKM,YAAY,CAClB,CAAE,EAGFpB,EAAG,aAAc,EAAEqB,KAAM,WACxBC,KAAKC,MAAOvB,EAAGe,IAAK,CAAE,CACvB,CAAE,EAGFf,EAAG,2BAA4B,EAAEgB,GAAI,SAAU,WAC9C,IAAIQ,EAAMxB,EAAGe,IAAK,EAAES,IAAI,EACnBA,IACJC,OAAOC,SAASC,KAAOH,EAEzB,CAAE,EAGFxB,EAAGyB,MAAO,EAAET,GAAI,eAAgB,WAC/B,GAAKF,EAAKJ,QAAU,CAAEI,EAAKF,aAC1B,OAAOU,KAAKM,KAAKC,UAAW,kDAAmD,CAIjF,CAAE,EAGF7B,EAAGyB,MAAO,EAAET,GAAI,SAAU,WACpBF,EAAKJ,QAAU,CAAEI,EAAKH,WAC1BG,EAAKgB,cAAc,CAErB,CAAE,EAEF9B,EAAG+B,QAAS,EAAEf,GAAI,4BAA6BF,EAAKkB,oBAAqB,EAGzEjB,KAAKkB,mBAAoB,UAAWlB,KAAKmB,QAAS,EAClDnB,KAAKkB,mBAAoB,SAAUlB,KAAKoB,eAAgB,EACxDpB,KAAKkB,mBAAoB,iBAAkBlB,KAAKoB,eAAgB,EAChEpB,KAAKkB,mBAAoB,aAAclB,KAAKoB,eAAgB,CAE7D,EAUAC,UAAW,SAAUC,GAEpB,IAAIvB,EAAOC,KAILuB,GAFNxB,EAAKX,WAAWoC,KAAM,4BAA6B,EAAEC,OAAO,EAC5D1B,EAAKX,WAAWsC,OAAQ,4EAA6E,EAC5E3B,EAAKX,WAAWoC,KAAM,4BAA6B,GAExEG,EAAO1C,EAAG,yBAA2BqC,EAAM,2EAA4E,EAC3HK,EAAK1B,GAAI,QAAS,IAAK,SAAUC,GAChCA,EAAEC,eAAe,EACjBwB,EAAKC,QAAS,KAAM,EACpBC,WAAY,WACXF,EAAKF,OAAO,CACb,EAAG,GAAI,CACR,CAAE,EACFF,EAAiBG,OAAQC,CAAK,CAE/B,EAEAG,cAAe,SAAUC,GACxB,IACCC,EAAYhC,KAAKZ,WAAWoC,KAAM,wBAAyB,EAC3DS,EAAYD,EAAUE,KAAM,WAAY,EAGlClC,KAAKN,WAAYuC,IAOpBE,EAAc,CACjBC,OAAQ,uBACRC,OAJOrC,KAAKN,WAAYuC,GAAQD,CAAU,EAI5BK,OACd/C,YAfeU,KAeGV,YAClBgD,YAAaN,EAAUE,KAAM,SAAU,EACvCK,cAAeP,EAAUE,KAAM,WAAY,CAC5C,EAEKH,GAAWA,EAAQS,YACvBL,EAAYM,cAAgB,CAAA,GAGxBV,GAAWA,EAAQW,oBACvBP,EAAYQ,sBAAwB,CAAA,GAGrCpC,KAAKqC,KAAKC,KAAM,CACfC,KAAMX,EACNY,QAAS,SAAUC,GACdjB,GAAuC,YAA5B,OAAOA,EAAQkB,UAC7BlB,EAAQkB,SAAS,CAEnB,CACD,CAAC,GA7BAC,QAAQC,IAAK,6CAA+ClB,CAAK,CA8BnE,EAUAmB,gBAAiB,SAAUC,GAE1B,IAGCC,EAHGvD,EAAYC,KACfgC,EAAYhC,KAAKZ,WAAWoC,KAAM,wBAAyB,EAC3DS,EAAYD,EAAUE,KAAM,WAAY,EAGzC,GAAOlC,KAAKN,WAAYuC,GAAxB,CAQA,GAAK,EADLqB,EAAQtD,KAAKN,WAAYuC,GAAQD,CAAU,IAC3B,CAAA,IAASsB,EAAMA,OAAS,CAAEA,EAAMjB,OAC/C,OAAOtC,EAAKsB,UAAWiC,EAAMA,KAAM,EAGpC/C,KAAKqC,KAAKC,KAAM,CACfC,KAAM,CACLV,OAAQ,uBACRC,OAAQiB,EAAMjB,OACd/C,YAAaS,EAAKT,YAClBgD,YAAaN,EAAUE,KAAM,SAAU,EACvCK,cAAeP,EAAUE,KAAM,WAAY,CAC5C,EACAqB,WAAY,WAEX,IAAIjC,EAAM+B,EAAKG,SAAU,2BAA4B,EAAIjD,KAAKM,KAAKC,UAAW,iBAAkB,EAAIP,KAAKM,KAAKC,UAAW,qBAAsB,EAC/If,EAAK0D,cAAe,OAAQnC,CAAI,EAEhCvB,EAAK2D,oBAAqB,WAAY,CAEvC,EACAX,QAAS,SAAUC,GAElBjD,EAAK0D,cAAe,MAAO,EAEtBT,EAAEF,MAAQE,EAAEF,KAAKa,KAGhBX,EAAEF,KAAKR,aAAevC,EAAKN,UAAW,KAAOuD,EAAEF,KAAKR,aAExDvC,EAAK6D,cAAe7D,EAAKN,UAAW,KAAOuD,EAAEF,KAAKR,YAAc,EAIhEvC,EAAK6D,cAAeZ,EAAEF,KAAKa,IAAK,EAGtBX,EAAEF,MAAQE,EAAEF,KAAKe,SAE5B9D,EAAK8D,SAAUb,EAAEF,KAAKe,QAAS,EAEpBb,EAAEc,QAEb/D,EAAKX,WAAWsC,OAAQ,MAAQsB,EAAEc,QAAU,MAAO,GAI/CxC,EAAMf,KAAKM,KAAKC,UAAW,8CAA+C,EAC9Ef,EAAKX,WAAWsC,OAAQ,MAAQJ,EAAM,MAAO,EAI/C,EACAyC,MAAO,SAAWC,EAAOrE,EAAQoE,GAChChE,EAAKkE,gBAAgB,EACrBlE,EAAKsB,UAAWd,KAAKM,KAAKC,UAAW,8CAA+C,CAAE,EACtFoC,QAAQC,IAAKY,CAAM,CACpB,CAED,CAAE,CA7DF,MAHCb,QAAQC,IAAK,6CAA+ClB,CAAK,CAkEnE,EAWAlB,cAAe,WAEd,IAAIhB,EAAOC,KAEXO,KAAKqC,KAAKC,KAAM,CACfC,KAAM,CACLV,OAAQ,WACR9C,YAAaS,EAAKT,WACnB,EACAiE,WAAY,WAEXxD,EAAK0D,cAAe,OAAQ,iBAAkB,CAE/C,EACAV,QAAS,SAAUC,GAElBjD,EAAK0D,cAAe,MAAO,EAEtBT,EAAEF,MAAQE,EAAEF,KAAKe,SAErB9D,EAAK8D,SAAUb,EAAEF,KAAKe,QAAS,EAEpBb,EAAEc,QAEb/D,EAAKX,WAAWsC,OAAQ,MAAQsB,EAAEc,QAAU,MAAO,GAI/CxC,EAAMf,KAAKM,KAAKC,UAAW,8CAA+C,EAC9Ef,EAAKX,WAAWsC,OAAQ,MAAQJ,EAAM,MAAO,EAI/C,CAED,CAAE,CAEH,EAUA4C,mBAAoB,SAAUC,GAE7B,OAAOC,OAAOC,KAAMrE,KAAKP,SAAU,EAAE6E,QAAS,KAAOH,CAAI,CAE1D,EAUAN,SAAU,SAAUU,GAEnBvE,KAAKyD,cAAe,OAAQ,iBAAkB,EAC9CzD,KAAKL,OAAkB,KACvBe,OAAOC,SAASC,KAAO2D,CAExB,EAEAN,gBAAiB,WAChB,IAAIlE,EAAOC,KAEXD,EAAK0D,cAAe,OAAQlD,KAAKM,KAAKC,UAAW,qBAAsB,CAAE,EACzEf,EAAK2D,oBAAqB,QAAS,EAEnC7B,WAAY,WACX9B,EAAK0D,cAAe,MAAO,EAC3B1D,EAAK6D,cAAe7D,EAAKN,UAAW,KAAOM,EAAKR,iBAAmB,CACpE,EAAG,GAAI,CAER,EAWAmD,kBAAmB,WAElB,IAAI3C,EAAOC,KAEXA,KAAK8B,cAAe,CACnBY,kBAAmB,CAAA,EACnBO,SAAU,WAETlD,EAAK0D,cAAe,OAAQlD,KAAKM,KAAKC,UAAW,qBAAsB,CAAE,EACzEf,EAAK2D,oBAAqB,WAAY,EAEtC,IAAIc,EAAUJ,OAAOC,KAAMtE,EAAKN,SAAU,EACzCgF,EAAUD,EAAIF,QAAS,KAAOvE,EAAKR,gBAAiB,EACpDmF,EAAUF,EAAI,GAEF,GAARC,IACJC,EAAUF,EAAKC,EAAO,IAIhB1E,EAAKN,UAAWiF,GAkCtB7C,WAAY,WACX9B,EAAK0D,cAAe,MAAO,EAC3B1D,EAAK6D,cAAe7D,EAAKN,UAAWiF,EAAU,CAC/C,EAAG,GAAI,EApCPnE,KAAKqC,KAAKC,KAAM,CACfC,KAAM,CACLV,OAAa,oBACb9C,YAAaS,EAAKT,YAClBgD,YAAaoC,EAAQC,UAAU,CAAC,CACjC,EACA5B,QAAS,SAAUC,GAElBjD,EAAK0D,cAAe,MAAO,EACtBT,EAAEF,MAAQE,EAAEF,KAAKa,KAErB5D,EAAK6D,cAAeZ,EAAEF,KAAKa,IAAK,EAErBX,EAAEF,MAAQE,EAAEF,KAAKe,SAE5B9D,EAAK8D,SAAUb,EAAEF,KAAKe,QAAS,EAEpBb,EAAEc,QAEb/D,EAAKX,WAAWsC,OAAQ,MAAQsB,EAAEc,QAAU,MAAO,GAI/CxC,EAAMf,KAAKM,KAAKC,UAAW,8CAA+C,EAC9Ef,EAAKX,WAAWsC,OAAQ,MAAQJ,EAAM,MAAO,EAI/C,CAED,CAAE,CAQJ,CACD,CAAC,CACF,EAWAJ,mBAAoB,SAAUe,EAAM2C,GAEnC5E,KAAKN,WAAYuC,GAAS2C,CAE3B,EAWAxE,WAAY,WAEXJ,KAAK6E,UAAW,YAAa,CAC9B,EASAxE,YAAa,WAEZL,KAAK6E,UAAW,aAAc,CAC/B,EASAA,UAAW,SAAWzC,GAErB,IAAIrC,EAAOC,KAEP,gBAAkBoC,GAErBnD,EAAG,mBAAoB,EAAEiD,KAAM,WAAY,UAAW,EAGvDlC,KAAK8E,iBAAiB,EACtB9E,KAAKX,IAAaJ,EAAG,eAAgB,EACrCe,KAAKb,SAAaF,EAAG,uBAAwB,EAC7Ce,KAAKZ,WAAaH,EAAG,6BAA8B,EAGnDA,EAAG,0CAA2C,EAAEgB,GAAI,QAAS,SAAUC,GACtEA,EAAEC,eAAe,EACjBJ,EAAKqD,gBAAiBnE,EAAGe,IAAK,CAAE,CACjC,CAAE,EAGFf,EAAG,qBAAsB,EAAEgB,GAAI,QAAS,SAAUC,GACjDA,EAAEC,eAAe,EACjBJ,EAAK2C,kBAAkB,CACxB,CAAE,EAGFzD,EAAG,gBAAiB,EAAEgB,GAAI,QAAS,kBAAmB,SAAUC,GAC/DA,EAAEC,eAAe,EACjBJ,EAAK+B,cAAe,CACnBU,UAAW,CAAA,EACXS,SAAU,WACTlD,EAAKF,aAAe,CAAA,EACpBa,OAAOC,SAASoE,OAAO,CACxB,CACD,CAAC,CACF,CAAE,EAGDjC,KADI,gBAAkBV,EACf,CACNA,OAAQ,cACR9C,YAAaL,EAAG,mBAAoB,EAAEwB,IAAI,CAC3C,EAEO,CACN2B,OAAQ,aACR9C,YAAaL,EAAG,mBAAoB,EAAEwB,IAAI,EAC1CuE,UAAY/F,EAAG,iBAAkB,EAAEwB,IAAI,EACvCwE,QAAUhG,EAAG,eAAgB,EAAEwB,IAAI,CACpC,EAGDF,KAAKqC,KAAKC,KAAM,CACfC,KAAMA,KACNS,WAAY,WAEXxD,EAAKJ,OAAS,CAAA,EACdV,EAAG,6DAA8D,EAAEwC,OAAO,EAC1ExC,EAAG,YAAa,EAAEiG,KAAK,EAAEC,QAAS,CAACC,UAAW,CAAE,EAAG,GAAI,EACvDrF,EAAK0D,cAAe,OAAQlD,KAAKM,KAAKC,UAAW,iBAAkB,CAAE,CAEtE,EACAiD,MAAO,SAAUf,EAAGqC,EAAGC,GACtBpC,QAAQC,IAAKH,EAAGqC,EAAGC,CAAE,CACtB,EACAvC,QAAS,SAAUC,GAElBjD,EAAK0D,cAAe,MAAO,EAEtBT,EAAEF,MAAQE,EAAEF,KAAKa,MAErB5D,EAAKT,YAAkB0D,EAAEF,KAAKxD,YAC9BS,EAAKP,gBAAkBwD,EAAEF,KAAKyC,MAC9BxF,EAAKH,UAAkBoD,EAAEF,KAAK0C,eAE1B,gBAAkBpD,EACrBY,EAAEF,KAAK2C,aAAaC,QAASC,GAAM5F,EAAKN,UAAU,KAAKkG,GAAQ,EAAG,EACvD3C,EAAEF,KAAK8C,YAClB7F,EAAK8F,iBAAkB7C,EAAEF,KAAK8C,UAAW,EAIrC7F,EAAKH,WACTX,EAAG,gBAAiB,EAAEyC,OAAQ,0FAA4FnB,KAAKM,KAAKC,UAAW,kBAAmB,EAAI,WAAY,EAGnLf,EAAK6D,cAAeZ,EAAEF,KAAKa,IAAK,EAE3B,gBAAkBvB,GACtBrC,EAAK2D,oBAAqB,QAAS,GAGzBV,EAAEc,QAEb/D,EAAKX,WAAWsC,OAAQ,MAAQsB,EAAEc,QAAU,MAAO,GAI/CxC,EAAMf,KAAKM,KAAKC,UAAW,8CAA+C,EAC9Ef,EAAKX,WAAWsC,OAAQ,MAAQJ,EAAM,MAAO,EAI/C,CAED,CAAE,EAOKf,KAAKuF,gBAAgB,IAE3B9F,KAAKX,IAAIY,GAAI,aAAc,uBAAwB,WAClDhB,EAAGe,IAAK,EAAE+F,SAAU,SAAU,CAC/B,CAAE,EACF/F,KAAKX,IAAIY,GAAI,aAAc,uBAAwB,WAClDhB,EAAGe,IAAK,EAAEgG,YAAa,SAAU,CAClC,CAAE,EAGJ,EAaAH,iBAAkB,SAAUI,GAG3B,IAAIC,EAAMjH,EAAG,sDAAuD,EACnEqC,EAAMf,KAAKM,KAAKC,UAAW,gBAAiB,EAGvCqF,GADND,EAAIxE,OAAQ,oFAAsFJ,EAAM,SAAU,EAC9FrC,EAAG,mBAAoB,GAQvCc,GAPJmG,EAAIxE,OAAQ,+GAAgH,EAE5HyE,EAAYzE,OAAQwE,CAAI,EACxBC,EAAYzE,OAAQ,wFAAyF,EAC7GyE,EAAYzE,OAAQ,8GAA+G,EAGjH1B,MACjBoG,GAAc,IAAIC,MAAOC,QAAQ,EAAwB,GAAhBL,EAAuB,IAChEL,EAAkC,GAAhBK,EAAuB,IACzCM,EAAcvF,SAASwF,eAAgB,0BAA2B,EAInE3E,WAAY,WACX9B,EAAKgB,cAAc,CACpB,EAAgB,IAAb6E,CAAkB,EAErB5F,KAAKyG,aACJR,EACAG,EACAR,EAVAc,KAAAA,EAAMC,KAAAA,EAAOC,KAAAA,EAASC,KAAAA,EAetBN,CACD,EAGAO,YAAa,WACZ/G,EAAK0G,aACJR,EACAG,EACAR,EAvBDc,KAAAA,EAAMC,KAAAA,EAAOC,KAAAA,EAASC,KAAAA,EA4BrBN,CACD,CACD,EAAG,GAAK,CACT,EAUAQ,QAAS,SAAUC,GAKb,oBAAsBA,IAErBhH,KAAKkE,mBALAlE,KAKyBT,gBAAiB,IAL1CS,KAKqDR,gBAE9DP,EAAG,qBAAsB,EAIzBA,EAAG,qBAAsB,GAJE8H,QAAS,OAAQ,CAU/C,EAUAnD,cAAe,SAAUD,GAExB,IAAIsD,EAAQhI,EAAG0E,CAAK,EACnBQ,EAAQ8C,EAAM/E,KAAM,SAAU,EAGxBlC,KAAKP,UAAW,KAAO0E,KAC7BnE,KAAKP,UAAW,KAAO0E,GAAQ8C,GAGhCjH,KAAKkH,gBAAiB/C,CAAI,EAE1BnE,KAAKT,iBAAmB4E,EAExBlF,EAAG+B,QAAS,EAAE+F,QAAS,2BAA4BE,CAAM,EAEzDjH,KAAKZ,WAAWsC,OAAQuF,CAAM,EAE9BhI,EAAG+B,QAAS,EAAE+F,QAAS,4BAA6BE,CAAM,CAE3D,EASAnC,iBAAkB,WAGiB,EAA7B7F,EAAG,eAAe,EAAEkI,QACxBlI,EAAG,eAAgB,EAAEwC,OAAO,EAG7B,IAAIwF,EAAUhI,EAAG,gDAAiD,EACjEmI,EAAUnI,EAAG,2DAA4D,GACzEoI,QAAUpI,EAAG,qDAAsD,GAE5DyC,OAAQ,mHAAqHnB,KAAKM,KAAKC,UAAW,eAAgB,EAAI,WAAY,EAC1LuG,QAAQ3F,OAAQ,mKAAqKnB,KAAKM,KAAKC,UAAW,eAAgB,EAAI,WAAY,EAC1OuG,QAAQ3F,OAAQ,sIAAwInB,KAAKM,KAAKC,UAAW,mBAAoB,EAAI,WAAY,EAEjNsG,EAAQ1F,OAAQ,4EAA6E,EAC7F2F,QAAQ3F,OAAQ,+JAAgK,EAEhLuF,EAAMvF,OAAQ0F,CAAQ,EACnB1F,OAAQ,4EAA6E,EACrFA,OAAQ2F,OAAQ,EAEnBpI,EAAG,oBAAqB,EAAEqI,MAAOL,CAAM,CAExC,EAWAhG,qBAAsB,SAAU+F,EAAOrD,GAE1B1E,EAAG0E,CAAK,EAETnC,KAAM,OAAQ,EAAE2F,QAC1BI,GAAGC,aAAaC,WAAW,CAG7B,EAWAhE,cAAe,SAAUiE,EAASpG,GAE5B,SAAWoG,GAEfpG,EAAMA,GAAOf,KAAKM,KAAKC,UAAW,YAAa,EAE/Cd,KAAKb,SAAS+C,KAAM,WAAY,UAAW,EAE3ClC,KAAKZ,WAAWuI,MAAM,EACtBpH,KAAKqH,QAAQC,MAAO7H,KAAKZ,UAAW,EACpCY,KAAKZ,WAAWsC,OAAQ,kCAAoCnB,KAAKM,KAAKC,UAAWQ,CAAI,EAAI,QAAS,IAIlGf,KAAKqH,QAAQ1C,KAAMlF,KAAKZ,UAAW,EACnCY,KAAKb,SAAS2I,WAAY,UAAW,EACrC9H,KAAKZ,WAAWoC,KAAM,oBAAqB,EAAEC,OAAO,EAItD,EAWAyF,gBAAiB,SAAU/C,GAEtB4D,EAAQ/H,KAAKkE,mBAAoBC,CAAI,EAEpC,CAAC,IAAM4D,IAIZA,CAAK,GAEL9I,EAAG,kCAAmC,EAAE+I,KAAMD,CAAM,EACvC,EAARA,GAAa,CAAE9I,EAAG,gCAAiC,EAAE+I,KAAK,IAC9D/I,EAAG,gCAAiC,EAAE+I,KAAMhI,KAAKR,eAAgB,EACjEP,EAAG,oBAAqB,EAAEgJ,KAAK,GAIlB,GAATF,EACJ9I,EAAG,qBAAsB,EAAEgJ,KAAK,EAEhChJ,EAAG,qBAAsB,EAAEiJ,KAAK,EAG5BH,IAAU/H,KAAKR,iBACnBP,EAAG,qBAAsB,EAAEiJ,KAAK,EAChCjJ,EAAG,qBAAsB,EAAEgJ,KAAK,IAEhChJ,EAAG,qBAAsB,EAAEgJ,KAAK,EAChChJ,EAAG,qBAAsB,EAAEiJ,KAAK,GAGlC,EAUAxE,oBAAqB,SAAUyE,GAE9B,IAAIJ,EAAQ/H,KAAKkE,mBAAoBlE,KAAKT,gBAAiB,EAC3D,OAAS4I,GACR,IAAK,YACJJ,CAAK,GACL,MACD,IAAK,YACJA,CAAK,EAIP,CAEAK,SAAaL,EAAQ/H,KAAKR,gBAAoB,IAC9CQ,KAAKX,IAAImC,KAAM,wBAAyB,EAAE6G,IAAK,QAASD,SAAW,GAAI,CAExE,EAoBA3B,aAAc,SAAUR,EAAeG,EAAaR,EAAYc,EAAMC,EAAOC,EAASC,EAASN,GAG9F,IAAI+B,GAAe,IAAIjC,MAAOC,QAAQ,EACrCiC,EAAeC,UAAYpC,EAAckC,GAAiB,GAAK,EAEhE,MAAMG,EAAOzH,SAASwF,eAAgB,iBAAkB,EAEnC,GAAhB+B,IAEkB,IAAfA,EAA0B3C,EAAa,GAE7C3G,EAAG,kBAAmB,EAAE8G,SAAU,YAAa,EAI1B,IAAfwC,EAA0B3C,EAAa,IAE7C3G,EAAG,kBAAmB,EAAE+G,YAAa,YAAa,EAClD/G,EAAG,kBAAmB,EAAE8G,SAAU,aAAc,GAsClCyC,SAAUD,EAAe,KAAM,EAC1CG,EAAYH,EAAe,MAC/B5B,EAAe6B,SAAUE,EAAY,IAAK,EAC1CA,EAAYH,EAAe,KAC3B3B,EAAe4B,SAAUE,EAAY,EAAG,EACxC7B,EAAe2B,SAAUE,EAAY,EAAG,EAExCnC,EAAUoC,UAAY3I,KAAK4I,IAAKjC,CAAM,EAAI,IAAM3G,KAAK4I,IAAKhC,CAAQ,EAAI,IAAM5G,KAAK4I,IAAK/B,CAAQ,EAE9F5H,EAAGsH,CAAU,EAAErE,KAAM,WAAY,MAAiB,EAARyE,EAAYA,EAAQ,IAAM,KAAmB,EAAVC,EAAcA,EAAU,IAAM,KAAmB,EAAVC,EAAcA,EAAU,IAAM,GAAK,GA3ChI,EA6CF0B,KA5CTC,SAAU5C,EAAa,GAAK,GACvC,EAAKP,GAAK,KACLA,GAAK,GAAYA,EAAI,IAAO,EAC1BA,EAAI,IAAO,MAGIwD,EAuCRjC,EAvCckC,EAuCLjC,EAtCV,GADEF,EAuCRA,GApCN8B,EAAKM,YAAsB,EAARpC,EAAYpG,KAAKM,KAAKmI,QAAS,qCAAsC,CACvFC,OAAQtC,EACRuC,OAAQL,CACT,CAAE,EAEFtI,KAAKM,KAAKmI,QAAS,iCAAkC,CACpDE,OAAQL,CACT,CAAE,EACgB,EAAPA,GAAqB,IAATC,EAEvBL,EAAKM,YAAqB,EAAPF,EAAWtI,KAAKM,KAAKmI,QAAS,yBAA0B,CAC1EC,OAAQJ,CACT,CAAE,EAEFtI,KAAKM,KAAKmI,QAAS,wBAAyB,CAC3CpC,QAASiC,CACV,CAAE,EACkB,IAATA,IACXJ,EAAKM,YAAcxI,KAAKM,KAAKmI,QAAS,yBAA0B,CAC/DC,OAAQH,CACT,CAAE,IAmBN,EAWAF,IAAK,SAASO,GACb,OAAQA,EAAI,GAAK,IAAM,IAAMA,CAC9B,EAWAhI,SAAU,SAAUa,GACnB,MAAO,CACNK,OAAQ,GACRiB,MAAO,CAAA,CACR,CACD,EAUAlC,gBAAiB,SAAUY,GAE1B,IAAIoH,EAAU1I,OAAO2I,KAAKC,QAAQnI,SAAUa,CAAU,EACrDuH,EAAUvH,EAAUR,KAAM,eAAgB,EAU3C,OARO+H,EAAQpC,OAGdoC,EAAQjJ,KAAM,WACb8I,EAAI/G,OAAOmH,KAAMvK,EAAGe,IAAK,EAAES,IAAI,CAAE,CAClC,CAAE,EAJF2I,EAAI9F,MAAQ/C,KAAKM,KAAKC,UAAW,wCAAyC,EAOpEsI,CAER,CAED,EAEAlK,EAAKY,KAAK,EAEVY,OAAO2I,KAAe3I,OAAO2I,MAAQ,GACrC3I,OAAO2I,KAAKC,QAAUpK,CAErB,EAAGuK,MAAO","sourceRoot":"../../js"}